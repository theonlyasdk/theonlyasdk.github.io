---
layout: page-notitle
icon: fas fa-code
order: 4
---
<style>
  .project-card {
    background-color: var(--card-bg);
    border-radius: 10px;
    display: flex;
    flex-direction: column;
    text-align: left;
    padding: 0em 2em 0em 2em;
    width: 100%;
    margin-bottom: 1.2em;
    box-shadow: var(--card-shadow);
    border: 0;
  }

  .project-card>h1 {
    margin: 2rem 0 1rem;
  }

  .project-card-tags {
    display: flex;
    flex-direction: row;
    flex-wrap: wrap;
  }

  .category.project-tag {
    margin-right: 0.4em;
    margin-bottom: 0;
  }

  .project-tag-icon {
    align-content: center;
  }

  .project-card-bottom {
    display: flex;
    flex-direction: row;
    justify-content: space-between;
  }

  .filter-tag {
    background-color: var(--card-bg);
    border-radius: 0.5em;
    padding: .2em .7em .2em .7em;
    border-color: var(--btn-border-color);
    box-shadow: var(--card-shadow);
    user-select: none;
    margin-right: 1em;
    transition: all 0.3s ease;
  }

  .filter-tag:hover {
    background-color: var(--card-hovor-bg);
  }

  .projects-filter {
    display: flex;
    flex-direction: row;
    align-items: center;
    margin-bottom: 1em;
  }

  .c-pointer {
    cursor: pointer;
  }

  .flex-row {
    display: flex;
    flex-direction: row;
    align-items: center;
  }

  .d-pop-out {
    animation: popOut 0.3s cubic-bezier(.17, 1.34, .22, 1.26) forwards;
  }

  .filter-tag {
    transition: all 0.3s cubic-bezier(0, -0.12, 0, 1.06);
  }

  @keyframes popOut {
    0% {
      transform: scale(1);
      opacity: 1;
    }

    100% {
      transform: scale(0.8);
      opacity: 0;
    }
  }

  .d-pop-in {
    animation: popIn 0.3s cubic-bezier(.17, 1.34, .22, 1.26) forwards;
  }

  @keyframes popIn {
    0% {
      transform: scale(0.8);
      opacity: 0;
    }

    100% {
      transform: scale(1);
      opacity: 1;
    }
  }

  .active-tag {
    color: var(--active-tag);
  }

  .flex-wrap {
    flex-wrap: wrap;
  }

  .filter-icon {
    margin-right: .7em;
  }

  @media (max-width: 768px) {
    .project-card {
      transition: height 0.5s cubic-bezier(0, -0.12, 0, 1.06), transform 0.2s cubic-bezier(0, -0.12, 0, 1.06);
      overflow: hidden;
    }

    .filter-icon {
      display: none;
    }

    .filter-tag {}

    .projects-filter {
      justify-content: space-evenly;
      overflow-x: scroll;
      overflow-y: visible;
    }

    .filter-tags>.filter-tag:last-child {
      margin-right: 0;
    }

    .filter-tags {
      flex-wrap: nowrap;
      overflow-x: scroll;
      overflow-y: visible;
    }

    .filter-tags>.filter-tag {
      flex-grow: 1;
      margin-top: 0.5em;
      text-align: center;
      flex-wrap: nowrap;
      text-wrap-mode: nowrap;
      white-space: nowrap;
    }

    /* .filter-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5em;
    }

    .filter-tags>.filter-tag {
      flex-grow: 1;
      margin-top: 0.5em;
      text-align: center;
    } */

    .projects-search-box {
      margin-bottom: 1em;
    }

    .d-none {
      display: block !important;
      width: 0 !important;
      height: 0 !important;
      opacity: 0 !important;
      margin: 0 !important;
      padding: 0 !important;
    }
  }
</style>

<!--
<div class="project-card">
  <h1 class="project-card-title"><a href="${url}">${name}</a></h1>
  <p class="project-card-content">${description}</p>
  <div class="project-card-bottom">
      <div class="project-card-tags categories">
        ${tag_elements}
      </div>
      ${should_show_demo_btn ? btn_demo : ""}
  </div>
</div>
 -->
<div class="projects-page-content align-center">
  <h1>My Projects</h1>
  <input class="projects-search-box" type="text" placeholder="Search projects..." autocomplete="off"
    id="projects-search-box">
  <div class="projects-filter">
    <div class="flex-row filter-icon">
      <i class="fa-solid fa-filter" title="Filter by"></i>
      &nbsp;&nbsp;
      <b>Filter by: </b>
    </div>
    <div class="flex-row filter-tags">
      <div class="filter-tag c-pointer" onclick="loader.filterByTag('')">
        <span id="current-filter-tag">All</span>
      </div>
      <div class="filter-tag c-pointer">
        <span id="current-filter-tag" onclick="loader.filterByDemo()">Has demo</span>
      </div>
      <div class="filter-tag c-pointer" id="filter-by-tag" onclick="loader.filterByTag('')">
        <span class="category project-tag">Tag</span>
        <i class="fa-solid fa-xmark" id="clear-filter"></i>
      </div>
    </div>
  </div>
  <br>
  <div class="projects-card-container" id="projects-list">
    <!-- Content will be filled by projects loader script -->
    <div class="projects-loading"><i>Loading projects...</i></div>
  </div>
</div>

<script src="{{ '/assets/js/logger.js' | relative_url }}"></script>
<!-- <script src="{{ '/assets/js/projects-loader.js' | relative_url }}"></script> -->
<!-- I'm putting the script here for easier modification.
     If at any point in the future would anybody want to put the script in a seperate file,
     please put it in the file referenced by the script tag above! -->
<script>
  let logger = new Logger("LibASDK Projects Loader");
  let projects_list_container = document.getElementById("projects-list");
  let currentFilterTag = "";
  let elemFilterByTag = document.getElementById("filter-by-tag");
  var loader = null;

  if (projects_list_container === null ||
    projects_list_container === undefined ||
    projects_list_container === "" ||
    projects_list_container.innerHTML === null ||
    projects_list_container.innerHTML === undefined ||
    projects_list_container.innerHTML === "") {
    logger.error("Unable to find projects list container!");
    throw new Error("Unable to find projects list container!");
  }

  const genLoadError = (msg) => `
<div class="error-loading-projects">
      <h1>Oops! Unable to load projects!</h1>
      <p>Please check the console and report the error in the issues tab of the GitHub repository for this website!</p>
      <i><b>Reason</b>: <code>${msg}</code></i>
  </div>
`;

  function checkNotNullOrEmpty(string) {
    return string !== undefined && string !== null && string !== "";
  }

  class ProjectsLoader {
    constructor(url) { this.url = url; }

    load = () => {
      fetch(this.url)
        .then((response) => {
          return response.json();
        }).then((json) => {
          this.propogate(json);
        })
        .catch((error) => {
          logger.error(`Unable to fetch ${this.url}: ${error}`);
          this.propogate(null);
        });
    }

    propogate = (projects_list) => {
      if (projects_list === null) {
        projects_list_container.innerHTML = genLoadError("ERR_NULL_LIST");
        logger.error("Skipping more apps list propogation because projects list is empty...");;
        return;
      }

      projects_list.forEach(element => {
        let name = element['name'];
        let description = element['description'];
        let url = element['url'];
        let tags = element['tags'].split(",");
        let demo_url = ('demo_url' in element) ? element['demo_url'] : "";
        let should_show_demo_btn = ('demo_url' in element);
        let tag_elements = "";

        for (let tag of tags) {
          tag_elements += `<a href="#${tag}" onclick="loader.filterByTag('${tag}')" class="category project-tag">${tag}</a>`
        }

        if (!checkNotNullOrEmpty(name) ||
          !checkNotNullOrEmpty(description) ||
          !checkNotNullOrEmpty(url) ||
          !checkNotNullOrEmpty(tags)) {
          logger.warn(`Skipping project due to missing fields: ${JSON.stringify(element)}`);
          return;
        }

        let btn_demo = `<a href="${demo_url}" target="_blank" class="button demo-button" title="Click to see a demo of this project (usually a web app)">Demo</a>`;
        let project_card_template = `
              <div class="project-card">
                <h1 class="project-card-title"><a href="${url}">${name}</a></h1>
                <p class="project-card-content">${description}</p>
                <div class="project-card-bottom">
                    <div class="project-card-tags categories ">
                      <i class="fa-solid fa-tag category project-tag project-tag-icon" title="Project tags"></i>
                      ${tag_elements}
                    </div>
                    ${should_show_demo_btn ? btn_demo : ""}
                </div>
              </div>
          `;

        // Prepend element before the rest of the elements
        projects_list_container.innerHTML = project_card_template + projects_list_container.innerHTML;
      });

      document.querySelector(".projects-loading").style.display = "none";
      document.querySelector("#projects-search-box").addEventListener("keydown", () => {
        this.filter(document.querySelector("#projects-search-box").value);
      });
    }

    filter(filter) {
      const fuzzify = (text) => text.toLowerCase().replace(" ", "")
      const projects = document.querySelectorAll('#projects-list .project-card')
      projects.forEach(task => {
        task.classList.remove('d-none')
        const title = fuzzify(task.querySelector('.project-card-title a').innerText)
        if (!title.includes(fuzzify(filter))) {
          task.classList.add('d-none')
        }
      })
    }

    setFilterTagTextAndVisibility(visible, tagName) {
      let elemFilterText = elemFilterByTag.querySelector("span");

      if (visible) {
        elemFilterByTag.onanimationend = null;
        elemFilterByTag.classList.remove('d-pop-out');
        elemFilterByTag.classList.remove('d-none');
        elemFilterByTag.classList.add('d-pop-in');
        elemFilterByTag.classList.add('active-tag');
        elemFilterText.innerHTML = tagName;
      }
      else {
        elemFilterByTag.classList.remove('d-pop-in');
        elemFilterByTag.classList.add('d-pop-out');

        if (window.innerWidth <= 768) { // Mobile screen
          elemFilterByTag.classList.add('d-none');
        }

        elemFilterByTag.onanimationend = () => {
          elemFilterByTag.classList.remove('active-tag');
          elemFilterText.innerHTML = '';

          if (window.innerWidth > 768) { // Desktop or tablet screen
            elemFilterByTag.classList.add('d-none');
          }
        };
      }
    }

    filterByTag(tagName) {
      this.setFilterTagTextAndVisibility(tagName !== '', tagName);

      const projects = document.querySelectorAll('#projects-list .project-card')
      projects.forEach(task => {
        task.classList.remove('d-none')
        const tags = task.querySelector('.project-card-tags').innerText
        if (!tags.includes(tagName)) {
          task.classList.add('d-none')
        }
      })
    }

    filterByDemo() {
      this.setFilterTagTextAndVisibility(false, '');

      const projects = document.querySelectorAll('#projects-list .project-card');
      projects.forEach(task => {
        task.classList.remove('d-none');
        const demoButton = task.querySelector('.demo-button');
        if (!demoButton) {
          task.classList.add('d-none');
        }
      });
    }
  }

  try {
    loader = new ProjectsLoader("https://raw.githubusercontent.com/theonlyasdk/libasdk/main/web/data/projects.json");
    loader.load();
  } catch (e) {
    projects_list_container.innerHTML = genLoadError(e);
  }
</script>